<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign up</title>
  </head>
  <body>
    <form>
      <div class="container">
        <h1>Sign Up</h1>
        <p>Please fill in this form to create an account.</p>
        <hr />

        <label for="email"><b>Email</b></label>
        <input id="email" type="text" placeholder="Enter Email" name="email" />

        <label style="font-weight: bold"><b>Password</b></label>
        <input
          type="password"
          placeholder="Enter Password"
          id="password"
          value=""
        />

        <label style="font-weight: bold"><b>Repeat Password</b></label>
        <input
          type="password"
          placeholder="Repeat Password"
          id="Repeatpassword"
          value=""
        />
        <p id="error" style="margin-top: -0.05rem"></p>

        <p>
          By creating an account you agree to our
          <a href="#" style="color: dodgerblue">Terms & Privacy</a>.
        </p>

        <div class="clearfix">
          <button type="button" class="cancelbtn">Cancel</button>
          <button id="signup_Btn" type="submit">Sign Up</button>
          <p style="color: green" id="signInSuccess"></p>
        </div>
      </div>
    </form>
  </body>
  <script>
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const passwordRepeatInput = document.getElementById("Repeatpassword");
    const signupBtn = document.getElementById("signup_Btn");
    const error = document.getElementById("error");
    const success = document.getElementById("signInSuccess");
    const email = emailInput.value;
    const password = passwordInput.value;
    const emailFormat = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; //anystring@anystring.anystring

    signupBtn.addEventListener("click", function (event) {
      event.preventDefault();

      //function for email validation
      function email_validation() {
        if (!emailFormat.test(email)) {
          return false;
        } else {
          return true;
        }
      }

      function password_check() {
        if (password !== passwordRepeatInput.value) {
          return false;
        } else {
          return true;
        }
      }

      //gonna handle errors here 
function errorHandler(){
  
}

      if (!email_validation() && !password_check()) {
        error.textContent = "email not in format or passwords are not matching";
      } else {
        //if both validations true
        //prompt sign in successful

        const storedDataObjectString = localStorage.getItem("userDataObject");
        let userDataObject = {};

        if (storedDataObjectString) {
          userDataObject = JSON.parse(storedDataObjectString);
        }

        // each successful submit click is given a user profile with name and email object (rewite this shit from memory and understand it)
        const UserCount = Object.keys(userDataObject).length + 1;
        userDataObject[`User${UserCount}`] = {
          email: email,
          password: password,
        };

        localStorage.setItem("userDataObject", JSON.stringify(userDataObject));

        console.log("Data stored in local storage:", userDataObject);
      }
    });
  </script>
</html>

<!-- 
-password and repeat password must be same to submit
if both are same alert submited and save it in local storage for login (done)

email:
- email format using regex 
- store email in object containing email and password
- also check if duplicate is in object (duplicates means email exists)
- so object is password email pair

store emails too, make sure emails are properly formatted regex shit or make it simple by making the type email 



  -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign up</title>
  </head>
  <body>
    <form>
      <div class="container">
        <h1>Sign Up</h1>
        <p>Please fill in this form to create an account.</p>
        <hr />

        <label for="email"><b>Email</b></label>
        <input id="email" type="text" placeholder="Enter Email" name="email" />

        <label style="font-weight: bold"><b>Password</b></label>
        <input
          type="password"
          placeholder="Enter Password"
          id="password"
          value=""
        />

        <label style="font-weight: bold"><b>Repeat Password</b></label>
        <input
          type="password"
          placeholder="Repeat Password"
          id="Repeatpassword"
          value=""
        />
        <p id="error" style="margin-top: -0.05rem"></p>

        <p>
          By creating an account you agree to our
          <a href="#" style="color: dodgerblue">Terms & Privacy</a>.
        </p>

        <div class="clearfix">
          <button type="button" class="cancelbtn">Cancel</button>
          <button id="signup_Btn" type="submit">Sign Up</button>
          <p style="color: green" id="signInSuccess"></p>
        </div>
      </div>
    </form>
  </body>
  <script>
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const passwordRepeatInput = document.getElementById("Repeatpassword");
    const signupBtn = document.getElementById("signup_Btn");
    const error = document.getElementById("error");
    const success = document.getElementById("signInSuccess");

    const password = passwordInput.value;
    const emailFormat = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/; //anystring@anystring.anystring

    signupBtn.addEventListener("click", function (event) {
      event.preventDefault();

      const email = emailInput.value;
      const password = passwordInput.value;
      //function for email validation
      //check if format is followed returns false if not
      //change it and handle email error cases
      function email_validation(email) {
        console.log("Email input:", email);
        const isValid = emailFormat.test(email);
        console.log("Validation result:", isValid);
        if (!isValid) {
          return false;
        } else {
          return true;
        }
      }

      //check for if password length is under 7 only over 7 is accepted
      //check if repeat password and password are the same
      function password_check(password, repeatPassword) {
        if (password !== repeatPassword) {
          return false;
        } else {
          return true;
        }
      }

      //gonna handle errors here
      function errorHandler(email, password, emailValid, passwordValid) {
        if (email === "" && password === "") {
          error.textContent = "Please enter the email and password.";
        } else if (email === "") {
          error.textContent = "Please enter the email.";
        } else if (password === "") {
          error.textContent = "Please enter a password.";
        } else if (!emailValid) {
          error.textContent = "Email is not in the correct format.";
        } else if (!passwordValid) {
          error.textContent = "Passwords do not match.";
        } else if (passwordValid && password.length < 7) {
          error.textContent =
            "please enter a password greater than 7 characters";
        } else {
          error.textContent = "";
        }
      }

      // function saveData() {
      //   if (email_validation && password_check {
      //     const storedDataObjectString = localStorage.getItem("userDataObject");
      //     let userDataObject = {};

      //     if (storedDataObjectString) {
      //       userDataObject = JSON.parse(storedDataObjectString);
      //     }

      //     // each successful submit click is given a user profile with name and email object (rewite this shit from memory and understand it)
      //     const UserCount = Object.keys(userDataObject).length + 1;
      //     userDataObject[`User${UserCount}`] = {
      //       email: email,
      //       password: password,
      //     };

      //     localStorage.setItem(
      //       "userDataObject",
      //       JSON.stringify(userDataObject)
      //     );

      //     console.log("Data stored in local storage:", userDataObject);
      //     success.textContent = "successful!";
      //   }
      // }

      const emailValue = emailInput.value.trim();
      const passwordValue = passwordInput.value.trim();
      const passwordRepeat = passwordRepeatInput.value.trim();

      const isEmailValid = email_validation(emailValue);
      const passwordsMatch = password_check(passwordValue, passwordRepeat);

      errorHandler(emailValue, passwordValue, isEmailValid, passwordsMatch);
      // saveData();
    });
  </script>
</html>

<!-- 
-password and repeat password must be same to submit
if both are same alert submited and save it in local storage for login (done)

email:
- email format using regex 
- store email in object containing email and password
- also check if duplicate is in object (duplicates means email exists)
- so object is password email pair

store emails too, make sure emails are properly formatted regex shit or make it simple by making the type email 




next:
- fix email formatting
- problems if inputs are empty 
- cancel button redirects you to homepage 
- add a local storage clear button

  -->

<!-- 
  
random breakdown:

how tf to handle 
if both passwords are matching but password is less than 7 prompt them to enter a longer password
  
  -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <h1 id="home">!letphil</h1>
    <h3>Login</h3>
    <label>email</label>
    <input type="text" id="email" placeholder="email" />
    <label>Password</label>
    <input type="text" id="password" placeholder="Password" />
    <p id="error"></p>
    <button id="submitBtn">Submit</button>
    <a href="./ForgotPassword.html">Forgot Password?</a>
  </head>
  <body>
    <script>
      const email = document.getElementById("email");
      const password = document.getElementById("password");
      const error = document.getElementById("error");
      const cancel = document.getElementById("cancel");

      const submitBtn = document.getElementById("submitBtn");
      //accessing emails and passwords
      const storedDataString = localStorage.getItem("allUsers");
      const userArray = JSON.parse(storedDataString) || [];
      console.log("userArray", userArray);

      submitBtn.addEventListener("click", function () {
        const passwordValue = password.value.trim();
        const emailValue = email.value.trim();

        let currentUser = {};
        let loginSuccessful = false;
        for (let i = 0; i < userArray.length; i++) {
          if (
            passwordValue === userArray[i].password &&
            emailValue === userArray[i].email
          ) {
            const userinfo = {
              name: userArray[i].name,
            };

            //figure out how to get the info from the full array so you can welcome them

            console.log(`login successful ${userinfo.name}`);
            loginSuccessful = true;
            error.textContent = "successful";
          }
        }

        // if (passwordValue.length === 0 && emailValue.length === 0) {
        //   error.textContent = "please input both feilds";
        // } else if (passwordValue.length === 0) {
        //   error.textContent = "please enter password";
        // } else if (emailValue.length === 0) {
        //   error.textContent = "please enter email";
        // } else {
        //   error.textContent = "";
        // }

        if (
          !loginSuccessful &&
          passwordValue.length > 0 &&
          emailValue.length > 0
        ) {
          error.textContent = "Invalid email or password.";
        }
        window.location.href = "./Welcome.html";
      });

      document.getElementById("home").addEventListener("click", function () {
        window.location.href = "./Home.html"; // Or your actual homepage URL
      });
    </script>
  </body>
</html>

<!-- 

[x] = done 


object containing email and password: [x]
check if it exists the email [x]

if it exists 
- email input must match password in local storage [x]

if everything works 
- user is logged in and set to welcome page using window.location "href" thing [x]



next features
- error handling for empty feilds []






//make a 2 local storage one for all users when signing in and one for current 
// current is for welcome 
-->
